name: design_skill
description: Produce full technical architecture — C4, ADRs, data flow, sequence diagrams

agents:
  - architect

inputs:
  - research: docs/research.md
  - stack: docs/stack.md
  - context: docs/context.md

steps:
  - name: architecture
    agent: architect
    description: >
      Read docs/research.md and docs/stack.md.
      Produce the full architecture document:
      C4 model (Context, Container, Component, Code),
      Architecture Decision Records for every key choice,
      data flow diagram, sequence diagrams for critical flows.
    output:
      - docs/design/architecture.md
      - docs/design/data_flow.md
      - docs/design/sequence.md
    gate: human_approval

constraints:
  - "Every major architectural choice must have an ADR"
  - "Architecture must support TDD — design for testability"
  - "Use mermaid syntax for all diagrams"